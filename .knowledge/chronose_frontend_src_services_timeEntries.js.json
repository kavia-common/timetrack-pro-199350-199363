{"is_source_file": true, "format": "JavaScript", "description": "Source file implementing client-side interactions with the 'time_entries' data store via Supabase. Contains functions for fetching, creating, updating, deleting, and validating time and leave entries, utilizing environment variables for configuration and feature flag management.", "external_files": ["@supabase/supabase-js"], "external_methods": ["createClient"], "published": ["listTimeEntriesWithType", "listMyTimeEntries", "createOrSaveDraftEntry", "createTimeEntry", "saveDraftEntry", "listMyLeaveEntries", "updateTimeEntry", "deleteTimeEntry", "validateEntryFields"], "classes": [], "methods": [{"name": "getFeatureFlags()", "description": "Reads feature flag settings from environment variables, supporting JSON and CSV formats, and returns configuration object.", "scope": "", "scopeKind": ""}, {"name": "mapRow(r)", "description": "Converts a database row into a UI-friendly object with standardized property names.", "scope": "", "scopeKind": ""}, {"name": "isMissingTable(error)", "description": "Detects schema or table absence errors based on error message or code.", "scope": "", "scopeKind": ""}, {"name": "listTimeEntriesWithType(userId, type = null)", "description": "Fetches time entries for a user, optionally filtered by entry type, respecting feature flags.", "scope": "", "scopeKind": ""}, {"name": "listMyTimeEntries(userId)", "description": "Legacy function to list all time entries for a user without filtering.", "scope": "", "scopeKind": ""}, {"name": "createOrSaveDraftEntry({ entry, mode = \"work\", status = \"draft\" })", "description": "Creates or updates draft time or leave entries, handling different modes ('work' or 'leave').", "scope": "", "scopeKind": ""}, {"name": "createTimeEntry(entry)", "description": "Creates a new work time entry, maintaining legacy export compatibility.", "scope": "", "scopeKind": ""}, {"name": "saveDraftEntry({ entry, mode })", "description": "Saves a draft (work or leave) entry.", "scope": "", "scopeKind": ""}, {"name": "listMyLeaveEntries(userId)", "description": "Lists all leave entries for a specific user.", "scope": "", "scopeKind": ""}, {"name": "updateTimeEntry(id, patch)", "description": "Updates an existing time entry record by ID.", "scope": "", "scopeKind": ""}, {"name": "deleteTimeEntry(id)", "description": "Deletes a time entry by ID.", "scope": "", "scopeKind": ""}, {"name": "validateEntryFields(values)", "description": "Performs basic validation on time entry input fields, returning errors and validation status.", "scope": "", "scopeKind": ""}], "calls": ["createClient", "supabase.from", "supabase.from().select()", "supabase.from().insert()", "supabase.from().update()", "supabase.from().delete()", "JSON.parse", "Object.entries", "Object.fromEntries", "Number", "Number.isNaN"], "search-terms": ["Supabase client", "time_entries", "createOrSaveDraftEntry", "listTimeEntriesWithType", "leave_type", "feature_flags"], "state": 2, "file_id": 30, "knowledge_revision": 101, "git_revision": "58672d63de629a99906eae16d855fc9403750ebd", "revision_history": [{"61": ""}, {"70": ""}, {"98": "58672d63de629a99906eae16d855fc9403750ebd"}, {"99": "58672d63de629a99906eae16d855fc9403750ebd"}, {"100": "58672d63de629a99906eae16d855fc9403750ebd"}, {"101": "58672d63de629a99906eae16d855fc9403750ebd"}], "ctags": [{"_type": "tag", "name": "SUPABASE_KEY", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^const SUPABASE_KEY = process.env.REACT_APP_SUPABASE_KEY;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "SUPABASE_URL", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^const SUPABASE_URL = process.env.REACT_APP_SUPABASE_URL;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "createOrSaveDraftEntry", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^export async function createOrSaveDraftEntry({ entry, mode = \"work\", status = \"draft\" }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ entry, mode = \"work\", status = \"draft\" })"}, {"_type": "tag", "name": "createTimeEntry", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^export async function createTimeEntry(entry) {$/", "language": "JavaScript", "kind": "function", "signature": "(entry)"}, {"_type": "tag", "name": "date", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^        date: entry.date,$/", "language": "JavaScript", "kind": "property", "scope": "createOrSaveDraftEntry.payload", "scopeKind": "class"}, {"_type": "tag", "name": "defaults", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^  const defaults = {$/", "language": "JavaScript", "kind": "class", "scope": "getFeatureFlags", "scopeKind": "class"}, {"_type": "tag", "name": "deleteTimeEntry", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^export async function deleteTimeEntry(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "e", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^  const e = new Error(message);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "enableRealData", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^    enableRealData: !!(SUPABASE_URL && SUPABASE_KEY),$/", "language": "JavaScript", "kind": "property", "scope": "getFeatureFlags.defaults", "scopeKind": "class"}, {"_type": "tag", "name": "err", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^const err = (message, code = 'client_unavailable') => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getFeatureFlags", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^export function getFeatureFlags() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "hours", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^        hours: Number(entry.hours),$/", "language": "JavaScript", "kind": "property", "scope": "createOrSaveDraftEntry.payload", "scopeKind": "class"}, {"_type": "tag", "name": "hours", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^        hours: Number(entry.leave_hours),$/", "language": "JavaScript", "kind": "property", "scope": "createOrSaveDraftEntry.payload", "scopeKind": "class"}, {"_type": "tag", "name": "isMissingTable", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^function isMissingTable(error) {$/", "language": "JavaScript", "kind": "function", "signature": "(error)"}, {"_type": "tag", "name": "listMyLeaveEntries", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^export async function listMyLeaveEntries(userId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId)"}, {"_type": "tag", "name": "listMyTimeEntries", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^export async function listMyTimeEntries(userId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId)"}, {"_type": "tag", "name": "listTimeEntriesWithType", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^export async function listTimeEntriesWithType(userId, type = null) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, type = null)"}, {"_type": "tag", "name": "mapRow", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^function mapRow(r) {$/", "language": "JavaScript", "kind": "function", "signature": "(r)"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^        notes: entry.notes || null,$/", "language": "JavaScript", "kind": "property", "scope": "createOrSaveDraftEntry.payload", "scopeKind": "class"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^      payload = {$/", "language": "JavaScript", "kind": "class", "scope": "createOrSaveDraftEntry", "scopeKind": "class"}, {"_type": "tag", "name": "project", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^        project: entry.project || null,$/", "language": "JavaScript", "kind": "property", "scope": "createOrSaveDraftEntry.payload", "scopeKind": "class"}, {"_type": "tag", "name": "saveDraftEntry", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^export async function saveDraftEntry({ entry, mode }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ entry, mode })"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^        status,$/", "language": "JavaScript", "kind": "field", "scope": "createOrSaveDraftEntry.payload", "scopeKind": "class"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^let supabase = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "task", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^        task: entry.task || null,$/", "language": "JavaScript", "kind": "property", "scope": "createOrSaveDraftEntry.payload", "scopeKind": "class"}, {"_type": "tag", "name": "updateTimeEntry", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^export async function updateTimeEntry(id, patch) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, patch)"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^        user_id: entry.user_id,$/", "language": "JavaScript", "kind": "property", "scope": "createOrSaveDraftEntry.payload", "scopeKind": "class"}, {"_type": "tag", "name": "validateEntryFields", "path": "/home/kavia/workspace/code-generation/timetrack-pro-199350-199363/chronose_frontend/src/services/timeEntries.js", "pattern": "/^export function validateEntryFields(values) {$/", "language": "JavaScript", "kind": "function", "signature": "(values)"}], "hash": "6544dbf39cea3fc486aac9209a17b87c", "format-version": 4, "code-base-name": "chronose_frontend", "filename": "chronose_frontend/src/services/timeEntries.js", "fields": [{"name": "date: entry.date,", "scope": "createOrSaveDraftEntry.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "enableRealData: !!(SUPABASE_URL && SUPABASE_KEY),", "scope": "getFeatureFlags.defaults", "scopeKind": "class", "description": "unavailable"}, {"name": "hours: Number(entry.hours),", "scope": "createOrSaveDraftEntry.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "hours: Number(entry.leave_hours),", "scope": "createOrSaveDraftEntry.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "notes: entry.notes || null,", "scope": "createOrSaveDraftEntry.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "project: entry.project || null,", "scope": "createOrSaveDraftEntry.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "status,", "scope": "createOrSaveDraftEntry.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "let supabase = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "task: entry.task || null,", "scope": "createOrSaveDraftEntry.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "user_id: entry.user_id,", "scope": "createOrSaveDraftEntry.payload", "scopeKind": "class", "description": "unavailable"}]}